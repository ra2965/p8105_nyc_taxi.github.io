<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Yuqing Xue" />

<meta name="date" content="2019-11-30" />

<title>weather and drive amount</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 41px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h2 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h3 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h4 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h5 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h6 {
  padding-top: 46px;
  margin-top: -46px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="regression_analysis.html">Regression  Analysis</a>
    </li>
    <li>
      <a href="weather_and_drive.html">Weather and Drive</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">weather and drive amount</h1>
<h4 class="author">Yuqing Xue</h4>
<h4 class="date">11/30/2019</h4>

</div>


<div id="temperature-and-taxi-use" class="section level1">
<h1>Temperature and Taxi Use</h1>
<p>Previous work has shown that there are relationships between taxi ridership and weather events.“During adverse weather, taxi drivers tend to make more money” (Kamga et al., 2013). Kamga et al. also found that during days when adverse weather took place, there was a higher demand for taxis in Manhattan compared to the other boroughs, and that more people were prone to take shorter taxi trips.</p>
<p>In this part, we want to see whether there is a trend between weather and yellow cab within and between months use using our data. We use the weather data including temperature and precipitation data in 2018 and their corresponding yellow taxi use data. For temperature, we use average temperature as the mean of maximum temperarure and miniminum temperature in each day.</p>
<pre class="r"><code>weather_tot=read_csv(file = &quot;./data/weather_nyc_2018.csv&quot;)%&gt;%
  mutate(date = as.character(date)) %&gt;%
  separate(date, into = c(&quot;year&quot;,&quot;month&quot;,&quot;pu_date&quot;), sep = &quot;-&quot;, convert = TRUE)%&gt;%
  mutate(
  average_temp=(tmin+tmax)/2)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   name = col_character(),
##   id = col_character(),
##   date = col_date(format = &quot;&quot;),
##   prcp = col_double(),
##   tmax = col_double(),
##   tmin = col_double()
## )</code></pre>
<pre class="r"><code>yellowcab=read_csv(file = &quot;./data/yearly_summary/2018_taxi_trip_daily_summary.csv&quot;)%&gt;%
  mutate(date = as.character(vars),
         daily_drive=n) %&gt;%
  separate(date, into = c(&quot;year&quot;,&quot;month&quot;,&quot;pu_date&quot;), sep = &quot;-&quot;, convert = TRUE)%&gt;%
  select(-vars,-year)</code></pre>
<pre><code>## Warning: Missing column names filled in: &#39;X1&#39; [1]</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   X1 = col_double(),
##   vars = col_date(format = &quot;&quot;),
##   n = col_double()
## )</code></pre>
<pre class="r"><code>cab_weather=
  left_join(weather_tot,yellowcab, by=c(&quot;month&quot;,&quot;pu_date&quot;))%&gt;%
  select(month, pu_date,average_temp, daily_drive,prcp)%&gt;%
  mutate(month=as.factor(month),
         month=recode_factor(month, &#39;1&#39;=&quot;January&quot;, &#39;2&#39;=&quot;Feburary&quot;,&#39;3&#39;=&quot;March&quot;,&#39;4&#39;=&#39;April&#39;,&#39;5&#39;=&#39;May&#39;,&#39;6&#39;=&#39;June&#39;,&#39;7&#39;=&#39;July&#39;,&#39;8&#39;=&#39;August&#39;,&#39;9&#39;=&#39;September&#39;,&#39;10&#39;=&#39;October&#39;,&#39;11&#39;=&#39;November&#39;,&#39;12&#39;=&#39;December&#39;))</code></pre>
<p>Here we make an animation plot to show the daily drive amount and average daily temperature for each month.The size of the dots shows the precipitaiton for that day which help to identify whether rainy weather also increase taxi use.</p>
<p>Although we hypothesis that cold weather and hot weather might have more taxi use, there is no obvious difference taxi useage for different daily temperature and no interaction between month and average temperature being observed. However, there is a slightly higher daily taxi usage in Feburary. Also, due to the limitation of pilot dataset which is generated from the raw dataset, we can’t investigate the pattern between month and daily taxi usage.</p>
<pre class="r"><code>weather_plot=cab_weather%&gt;%
  ggplot(aes(x=average_temp, y=daily_drive, frame_vars(month)))+
  geom_point(aes(size=prcp,colour = month))+
   labs(title = &#39;Month: {closest_state}&#39;,
       x = &#39;Daily average temperature for year 2018 ℃&#39;, 
       y = &#39;Daily drive amount&#39;,
       colour = &#39;Month&#39;,
       size=&#39;Precipitation&#39;
       ) +
  transition_states(month,2,1)+
  enter_appear()+
  exit_fade()
   
animate(weather_plot, duration=12)</code></pre>
<p><img src="weather_and_drive_files/figure-html/unnamed-chunk-5-1.gif" /><!-- --></p>
</div>
<div id="precipitation-and-taxi-use" class="section level1">
<h1>Precipitation and Taxi Use</h1>
<p>We then want to further look at the association between precipitation, as we guess that people might take more taxi in rainy days. This time, we make a panel of scatterplot for each month in 2018, with precipitation as x-axis and daily drive amount in y-axis.</p>
<p>Still, there is no obvious difference in the taxi use.</p>
<p><img src="weather_and_drive_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
